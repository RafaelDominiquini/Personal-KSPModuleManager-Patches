// Add tank fuel switch for all tanks

// Add primary tank types to stock parts. Structural first in list
@PART[airplaneTail,airplaneTailB]:HAS[!RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:
	
	refVolume = 200

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refVolume$
		
		SUBTYPE
		{
			name = Structural
			title = Structural
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 80
		}
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 70
		}
	}
}

// Add primary tank types to stock parts. LFO first in list
@PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleCommand],!MODULE[ModuleEngines],!MODULE[ModuleEnginesFX],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	refVolume = #$RESOURCE[LiquidFuel]/maxAmount$
	@refVolume += #$RESOURCE[Oxidizer]/maxAmount$

	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refVolume$

		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. LiquidFuel first in list
@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!MODULE[ModuleCommand],!MODULE[ModuleEngines],!MODULE[ModuleEnginesFX],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	refVolume = #$RESOURCE[LiquidFuel]/maxAmount$

	!RESOURCE[LiquidFuel] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refVolume$

		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. Oxidizer first in list
@PART[*]:HAS[!RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleCommand],!MODULE[ModuleEngines],!MODULE[ModuleEnginesFX],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	refVolume = #$RESOURCE[Oxidizer]/maxAmount$

	!RESOURCE[Oxidizer] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refVolume$

		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 80
		}		
	}
}

// Change Ore tanks

B9_TANK_TYPE
{
	name = Ore
	title = #autoLOC_501007 //#autoLOC_501007 = Ore
	primaryColor = #222322
	percentFilled = 0
	tankMass = 0.0004
	tankCost = 0.1
	RESOURCE
	{
		name = Ore
		unitsPerVolume = 1
	}
}

B9_TANK_TYPE
{
	name = MetallicOre
	title = #LOC_CRP_MetallicOre_DisplayName //#LOC_CRP_MetallicOre_DisplayName = Metallic Ore
	primaryColor = #583D20
	percentFilled = 0
	tankMass = 0.0001
	tankCost = 0.1
	RESOURCE
	{
		name = MetallicOre
		unitsPerVolume = 1
	}
}

B9_TANK_TYPE
{
	name = Uraninite
	title = #LOC_CRP_Uraninite_DisplayName //#LOC_CRP_Uraninite_DisplayName = Uraninite
	primaryColor = #9D8948
	percentFilled = 0
	tankMass = 0.0004
	tankCost = 0.2
	RESOURCE
	{
		name = Uraninite
		unitsPerVolume = 1
	}
}

// Add primary tank types to stock parts. Ore first in list
@PART[*]:HAS[@RESOURCE[Ore],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nResource Switch.</color>:
	
	refRAWVolume = #$RESOURCE[Ore]/maxAmount$

	!RESOURCE[Ore] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = rawSwitch
		switcherDescription = Resource Type
		switchInFlight = True
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refRAWVolume$

		SUBTYPE
		{
			name = Ore
			tankType = Ore
			title = Ore
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = MetallicOre
			tankType = MetallicOre
			title = Metallic Ore
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = Uraninite
			tankType = Uraninite
			title = Uraninite
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. Metallic Ore first in list
@PART[*]:HAS[@RESOURCE[MetallicOre],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nResource Switch.</color>:

	refRAWVolume = #$RESOURCE[MetallicOre]/maxAmount$

	!RESOURCE[Ore] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = rawSwitch
		switcherDescription = Resource Type
		switchInFlight = True
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refRAWVolume$

		SUBTYPE
		{
			name = MetallicOre
			tankType = MetallicOre
			title = Metallic Ore
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = Ore
			tankType = Ore
			title = Ore
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = Uraninite
			tankType = Uraninite
			title = Uraninite
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. Uraninite first in list
@PART[*]:HAS[@RESOURCE[Uraninite],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nResource Switch.</color>:

	refRAWVolume = #$RESOURCE[Uraninite]/maxAmount$

	!RESOURCE[Uraninite] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = rawSwitch
		switcherDescription = Resource Type
		switchInFlight = True
		affectDragCubes = False
		affectFARVoxels  = False
		baseVolume = #$../refRAWVolume$

		SUBTYPE
		{
			name = Uraninite
			tankType = Uraninite
			title = Uraninite
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = Ore
			tankType = Ore
			title = Ore
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = MetallicOre
			tankType = MetallicOre
			title = Metallic Ore
			defaultSubtypePriority  = 80
		}
	}
}
