// Add tank fuel switch for all tanks

// B9_TANK_TYPE
// {
// 	name = LFO
// 	title = #LOC_TT_LFO // LFO
// 	tankMass = 0.000125
// 	tankCost = 0.25
// 
// 	RESOURCE
// 	{
// 		name = LiquidFuel
// 		unitsPerVolume = 0.45
// 	}
// 	RESOURCE
// 	{
// 		name = Oxidizer
// 		unitsPerVolume = 0.55
// 	}
// }

// B9_TANK_TYPE
// {
// 	name = LiquidFuel
// 	title = #autoLOC_500999 // Liquid Fuel
// 	tankMass = 0.0001
// 	tankCost = 0.375
// 	RESOURCE
// 	{
// 		name = LiquidFuel
// 		unitsPerVolume = 1
// 	}
// }

B9_TANK_TYPE
{
	name = Oxidizer
	title = #autoLOC_501000 //#autoLOC_501000 = Oxidizer
	tankMass = 0.0001
	tankCost = 0.148
	RESOURCE
	{
		name = Oxidizer
		unitsPerVolume = 1
	}
}

// Mark tanks to be changed
@PART[airplaneTail,airplaneTailB]:HAS[!RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refVolume = 200

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		baseVolume = #$../refVolume$
		refType = Structural
	}
}

// Mark tanks to be changed
@PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleCommand],!MODULE[ModuleEngines],!MODULE[ModuleEnginesFX],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refVolume = #$RESOURCE[LiquidFuel]/maxAmount$
	@refVolume += #$RESOURCE[Oxidizer]/maxAmount$

	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		baseVolume = #$../refVolume$
		refType = LFO
	}
}

// Mark tanks to be changed
@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!MODULE[ModuleCommand],!MODULE[ModuleEngines],!MODULE[ModuleEnginesFX],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refVolume = #$RESOURCE[LiquidFuel]/maxAmount$

	!RESOURCE[LiquidFuel] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		baseVolume = #$../refVolume$
		refType = LiquidFuel
	}
}

// Mark tanks to be changed
@PART[*]:HAS[!RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[ModuleCommand],!MODULE[ModuleEngines],!MODULE[ModuleEnginesFX],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refVolume = #$RESOURCE[Oxidizer]/maxAmount$

	!RESOURCE[Oxidizer] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitch
		switcherDescription = Fuel Type
		switchInFlight = False
		baseVolume = #$../refVolume$
		refType = Oxidizer
	}
}

// Add primary tank types to stock parts. 
// LFO first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[LFO]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[fuelSwitch]:HAS[#refType[LFO]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[LFO]]]
	{
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. 
// LiquidFuel first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[LiquidFuel]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[fuelSwitch]:HAS[#refType[LiquidFuel]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[LiquidFuel]]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. 
// Oxidizer first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[Oxidizer]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[fuelSwitch]:HAS[#refType[Oxidizer]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[Oxidizer]]]
	{
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. 
// Structural first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[Structural]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[fuelSwitch]:HAS[#refType[Structural]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nFuel Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]:HAS[#refType[Structural]]]
	{
		SUBTYPE
		{
			name = Structural
			title = Structural
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LF+Ox
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = Liquid Fuel
			defaultSubtypePriority  = 80
		}
		SUBTYPE
		{
			name = O
			tankType = Oxidizer
			title = Oxidizer
			defaultSubtypePriority  = 70
		}
	}
}

// Change Ore tabks

B9_TANK_TYPE
{
	name = Ore
	title = #autoLOC_501007 //#autoLOC_501007 = Ore
	tankMass = 0.0004
	tankCost = 0.1
	RESOURCE
	{
		name = Ore
		unitsPerVolume = 1
	}
}

B9_TANK_TYPE
{
	name = MetallicOre
	title = #LOC_CRP_MetallicOre_DisplayName //#LOC_CRP_MetallicOre_DisplayName = Metallic Ore
	tankMass = 0.0001
	tankCost = 0.1
	RESOURCE
	{
		name = MetallicOre
		unitsPerVolume = 1
	}
}

B9_TANK_TYPE
{
	name = Uraninite
	title = #LOC_CRP_Uraninite_DisplayName //#LOC_CRP_Uraninite_DisplayName = Uraninite
	tankMass = 0.0004
	tankCost = 0.2
	RESOURCE
	{
		name = Uraninite
		unitsPerVolume = 1
	}
}


// Mark tanks to be changed
@PART[*]:HAS[@RESOURCE[Ore],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refRAWVolume = #$RESOURCE[Ore]/maxAmount$

	!RESOURCE[Ore] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = rawSwitch
		switcherDescription = Resource Type
		switchInFlight = True
		baseVolume = #$../refRAWVolume$
		refType = Ore
	}
}

// Mark tanks to be changed
@PART[*]:HAS[@RESOURCE[MetallicOre],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refRAWVolume = #$RESOURCE[Metallic Ore]/maxAmount$

	!RESOURCE[Ore] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = rawSwitch
		switcherDescription = Resource Type
		switchInFlight = True
		baseVolume = #$../refRAWVolume$
		refType = MetallicOre
	}
}

// Mark tanks to be changed
@PART[*]:HAS[@RESOURCE[Uraninite],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleTankManager],!MODULE[FSfuelSwitch],!MODULE[ModuleSimpleFuelSwitch],!MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch]:FOR[ZZZ_CustomMMPatches]
{
	refRAWVolume = #$RESOURCE[Uraninite]/maxAmount$

	!RESOURCE[Uraninite] {}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = rawSwitch
		switcherDescription = Resource Type
		switchInFlight = True
		baseVolume = #$../refRAWVolume$
		refType = Uraninite
	}
}

// Add primary tank types to stock parts. 
// Ore first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rawSwitch]:HAS[#refType[Ore]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[rawSwitch]:HAS[#refType[Ore]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nResource Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rawSwitch]:HAS[#refType[Ore]]]
	{
		SUBTYPE
		{
			name = Ore
			tankType = Ore
			title = Ore
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = MetallicOre
			tankType = MetallicOre
			title = Metallic Ore
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = Uraninite
			tankType = Uraninite
			title = Uraninite
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. 
// Metallic Ore first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rawSwitch]:HAS[#refType[MetallicOre]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[rawSwitch]:HAS[#refType[MetallicOre]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nResource Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rawSwitch]:HAS[#refType[MetallicOre]]]
	{
		SUBTYPE
		{
			name = MetallicOre
			tankType = MetallicOre
			title = Metallic Ore
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = Ore
			tankType = Ore
			title = Ore
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = Uraninite
			tankType = Uraninite
			title = Uraninite
			defaultSubtypePriority  = 80
		}
	}
}

// Add primary tank types to stock parts. 
// Uraninite first in list
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rawSwitch]:HAS[#refType[Uraninite]]]]:NEEDS[B9PartSwitch]:FINAL
{
	@description:HAS[#moduleID[rawSwitch]:HAS[#refType[Uraninite]]]:NEEDS[B9PartSwitch] ^= :$:<color=orange>\nResource Switch.</color>:

	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[rawSwitch]:HAS[#refType[Uraninite]]]
	{
		SUBTYPE
		{
			name = Uraninite
			tankType = Uraninite
			title = Uraninite
			defaultSubtypePriority  = 100
		}
		SUBTYPE
		{
			name = Ore
			tankType = Ore
			title = Ore
			defaultSubtypePriority  = 90
		}
		SUBTYPE
		{
			name = MetallicOre
			tankType = MetallicOre
			title = Metallic Ore
			defaultSubtypePriority  = 80
		}
	}
}
