// Makes the LY-01 Basic Landing Gear (the side one) as stiff as (front wheel from same techlevel) LY-05.

@PART[GearFixed]:FINAL
{
	@crashTolerance = 325

	@MODULE[ModuleWheelSuspension]
	{
		@springRatio = 25
		@damperRatio = 1.0
	}
}


// Add brakes to LY-05 Landing Gear

@PART[GearFree]:FINAL
{
	@MODULE[ModuleWheelBase]
	{
		@TooltipPrimaryField = Steerable
	}
   
	MODULE 
	{
		name = ModuleWheelBrakes
		baseModuleIndex = 0
		maxBrakeTorque = 1.5
		brakeResponse = 1
	}
}


// Adds internal combustion wheels

@PART[*]:HAS[@MODULE[ModuleWheelMotor]:HAS[@RESOURCE[ElectricCharge]]]:NEEDS[B9PartSwitch]:FINAL
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = PowerType
		switcherDescription = Power Type
		switchInFlight = False
		affectDragCubes = False
		affectFARVoxels  = False
		refRate = #$../MODULE[ModuleWheelMotor]/RESOURCE[ElectricCharge]/rate$

		SUBTYPE
		{
			name = Electric
			primaryColor = #DD0000
			defaultSubtypePriority  = 100
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWheelMotor
				}
				DATA
				{
					RESOURCE
					{
						name = ElectricCharge
						rate = #$../../../../refRate$
					}
				}
			}
		}
		SUBTYPE
		{
			name = Internal Combustion
			primaryColor = #222222
			defaultSubtypePriority  = 10
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWheelMotor
				}
				DATA
				{
					RESOURCE
					{
						name = LiquidFuel
						rate = #$../../../../refRate$
						@rate /= 256
					}
					RESOURCE
					{
						name = IntakeAir
						rate = #$../../../../refRate$
						@rate /= 32
					}
				}
			}
		}
	}

	@MODULE[ModuleWheelMotor]:HAS[@RESOURCE[ElectricCharge]]
	{
		-RESOURCE[ElectricCharge] {}
	}
}


// Adds sounds to modded wheels

@PART[*]:HAS[!MODULE[RSE_Wheels],@MODULE[ModuleWheelBase],!MODULE[ModuleWheelMotor]]:NEEDS[RocketSoundEnhancement]:FINAL
{
	MODULE
	{
		name = RSE_Wheels
		volume = 1.0

		Ground
		{
			SOUNDLAYER
			{
				name = Tire_Concrete
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Concrete
				data = concrete

				loop = true
				loopAtRandom = true

				channel = ShipBoth

				spread = 0.12

				volume = 0.0 0.0
				volume = 1.0 0.1
				volume = 60.0 1.0

				pitch = 0.0 0.8
				pitch = 60.0 1.2
			}

			SOUNDLAYER
			{
				name = Tire_Ground-Dirt
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Ground
				data = dirt

				loop = true
				loopAtRandom = true

				channel = ShipBoth

				spread = 0.12

				volume = 0.0 0.0
				volume = 1.0 0.1
				volume = 60.0 1.0

				pitch = 0.0 0.8
				pitch = 60.0 1.2
			}
		}

		Slip
		{
			SOUNDLAYER
			{
				name = Tire_Screech-Low-Concrete
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Screech-High
				data = concrete

				loop = true
				loopAtRandom = true

				channel = ShipBoth

				spool = true
				spoolSpeed = 2

				spread = 0.12

				volume = 0.0 0.0
				volume = 0.1 0.5
				volume = 1.0 1.0

				pitch = 0.0 1.2
				pitch = 1.0 1.0
			}

			SOUNDLAYER
			{
				name = Tire_Slip-Dirt
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Ground

				loop = true
				loopAtRandom = true

				channel = ShipBoth
				
				spool = true
				spoolSpeed = 2

				spread = 0.12
				
				volume = 0.0 0.0
				volume = 0.1 0.5
				volume = 1.0 1.0

				pitch = 0.0 2.0
				pitch = 1.0 1.8
			}
		}
	}
}

@PART[*]:HAS[!MODULE[RSE_Wheels],@MODULE[ModuleWheelBase],@MODULE[ModuleWheelMotor]]:NEEDS[RocketSoundEnhancement]:FINAL
{
	MODULE
	{
		name = RSE_Wheels
		volume = 1.0

		//Torque, Speed, Ground, Slip
		Speed
		{
			SOUNDLAYER
			{
				name = Motor_Base
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Motor_ElectricCar-Base

				loop = true
				loopAtRandom = true

				channel = ShipBoth
				
				spool = true
				spoolSpeed = 60

				spread = 0.12

				volume = 0.0 0.0
				volume = 1.0 0.4
				volume = 25.0 0.6

				pitch = 0.0 0.25
				pitch = 8.0 0.5
				pitch = 25.0 1.0
			}
			
			SOUNDLAYER
			{
				name = Motor_Whine
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Motor_ElectricCar-Whine

				loop = true
				loopAtRandom = true

				channel = ShipBoth
				
				spool = true
				spoolSpeed = 60

				spread = 0.12

				volume = 0.0 0.0
				volume = 1.0 0.6
				volume = 8.0  0.5
				volume = 25.0 0.2

				pitch = 0.0 0.1
				pitch = 8.0  0.75
				pitch = 25.0 1.0
			}
		}

		Ground
		{
			SOUNDLAYER
			{
				name = Tire_Concrete
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Concrete
				data = concrete

				loop = true
				loopAtRandom = true

				channel = ShipBoth

				spread = 0.12

				volume = 0.0 0.0
				volume = 1.0 0.1
				volume = 60.0 1.0

				pitch = 0.0 0.8
				pitch = 60.0 1.2
			}

			SOUNDLAYER
			{
				name = Tire_Ground-Dirt
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Ground
				data = dirt

				loop = true
				loopAtRandom = true

				channel = ShipBoth

				spread = 0.12

				volume = 0.0 0.0
				volume = 1.0 0.1
				volume = 60.0 1.0

				pitch = 0.0 0.8
				pitch = 60.0 1.2
			}
		}

		Slip
		{
			SOUNDLAYER
			{
				name = Tire_Screech-Low-Concrete
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Screech-Low
				data = concrete
				
				loop = true
				loopAtRandom = true

				channel = ShipBoth

				spool = true
				spoolSpeed = 2

				spread = 0.12

				volume = 0.0 0.0
				volume = 0.1 0.5
				volume = 1.0 1.0

				pitch = 0.0 1.3
				pitch = 1.0 1.1
			}

			SOUNDLAYER
			{
				name = Tire_Slip-Dirt
				audioClip = RocketSoundEnhancement/Sounds/Wheels/Tire_Ground
				data = dirt

				loop = true
				loopAtRandom = true

				channel = ShipBoth
				
				spool = true
				spoolSpeed = 2

				spread = 0.12
				
				volume = 0.0 0.0
				volume = 0.1 0.5
				volume = 1.0 1.0

				pitch = 0.0 2.0
				pitch = 1.0 1.8
			}
		}
	}
}
